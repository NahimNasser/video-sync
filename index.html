<html>
<body>
	<h1>Hello world!</h1>
	<video id="my_video_1" class="video-js vjs-default-skin" controls
		 preload="auto" width="640" height="264" poster="my_video_poster.png"
		 data-setup="{}">
		 <source src="my_video.mp4" type='video/mp4'>
		 <source src="my_video.webm" type='video/webm'>
	</video>

</body>
<link href="http://vjs.zencdn.net/4.3/video-js.css" rel="stylesheet">

<script src="http://vjs.zencdn.net/4.3/video.js"></script>
<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script>
	var video = $('#main-video');
	var socket = io.connect('http://localhost');

	socket.on('player:pause', function(data) {
		// console.log('got someone asking to pause');
		// console.log(data);
		video[0].pause();
		video[0].currentTime = data['time'];
	});

	socket.on('player:play', function(data) {
		// console.log('got someone asking to play');
		// console.log(data);
		video[0].currentTime = data['time'];
		video[0].play();
	});

	socket.on('player:timechange', function(data) {
		// Implement this for slow internet connection buffers
	});
</script>
<script>
	function getPayload(video) {
		var time = video[0].currentTime;
		return {
			'time': time
		};
	};

	$(function() {
		video.on('pause', function() {	
			// console.log("sending pause");
			socket.emit("player:pause", getPayload(video));
		});
		video.on('play', function() {
			socket.emit("player:play", getPayload(video));
			// console.log("sending play");
		});
		video.on('timeupdate', function(data) {
			// console.log(data);
		});
	});

</script>
</html>